{% load static %}
<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />
  <title>Dashboard</title>
  <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.min.css' %}" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" />
  <link rel="stylesheet" href="{% static 'fonts/fontawesome-all.min.css' %}" />
  <link rel="stylesheet" href="{% static 'bootstrap/css/stylecal.css' %}" />
  <link rel="icon" href="{% static 'images/logo.svg' %}" type=" image/x-icon">
</head>

<body id="page-top">
  <div id="wrapper">
    <nav class="navbar navbar-dark align-items-start sidebar sidebar-dark accordion bg-gradient-primary p-0">
      <div class="container-fluid d-flex flex-column p-0">
        <a class="navbar-brand d-flex justify-content-center align-items-center sidebar-brand m-0" href="#">
          <div class="sidebar-brand-icon">
            <i class="fas fa-star"></i>

          </div>
          <div class="sidebar-brand-text mx-3"><span>EventVIP</span></div>
        </a>
        <hr class="sidebar-divider my-0" />
        <ul class="nav navbar-nav text-light" id="accordionSidebar">
          <!-- Divider -->
          <hr class="sidebar-divider my-0">

          <!-- Nav Item - Dashboard -->
          <li class="nav-item active">
            <a class="nav-link" href="">
              <i class="fas fa-fw fa-tachometer-alt"></i>
              <span>Dashboard</span></a>
          </li>

          <!-- Divider -->
          <hr class="sidebar-divider">
          <!-- Nav Item - Pages Collapse Menu -->
          <li class="nav-item">
            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo"
              aria-expanded="true" aria-controls="collapseTwo">
              <i class="fas fa-glass-cheers"></i>
              <span>Event</span>
            </a>
            <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
              <div class="bg-white py-2 collapse-inner rounded">
                <h6 class="collapse-header">Event</h6>
                <a class="collapse-item" href="cevent">Create Event</a>
                <a class="collapse-item" href="devent">Delete Event</a>
                <a class="collapse-item" href="myevent">My Events</a>
              </div>
            </div>
          </li>
          <!-- Nav Item - Utilities Collapse Menu -->
          <li class="nav-item">
            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseUtilities1"
              aria-expanded="true" aria-controls="collapseUtilities1">
              <i class="fas fa-users"></i>
              <span>Teams</span>
            </a>
            <div id="collapseUtilities1" class="collapse" aria-labelledby="headingUtilities"
              data-parent="#accordionSidebar">
              <div class="bg-white py-2 collapse-inner rounded">
                <h6 class="collapse-header">Plan Your Teams</h6>
                <a class="collapse-item" href="cteam">Create Teams</a>
                <a class="collapse-item" href="dteam">Delete Teams</a>
                <a class="collapse-item" href="myteam">View Teams</a>
              </div>
            </div>
          </li>
          <!-- Nav Item - Utilities Collapse Menu -->
          <li class="nav-item">
            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseUtilities2"
              aria-expanded="true" aria-controls="collapseUtilities2">
              <i class="fas fa-user-plus"></i>
              <span>Members</span>
            </a>
            <div id="collapseUtilities2" class="collapse" aria-labelledby="headingUtilities"
              data-parent="#accordionSidebar">
              <div class="bg-white py-2 collapse-inner rounded">
                <h6 class="collapse-header">Manage Members</h6>
                <a class="collapse-item" href="cmember">Add Members</a>
                <a class="collapse-item" href="dmember">Delete Members</a>
                <a class="collapse-item" href="mymember">View Members</a>
              </div>
            </div>
          </li>
          <!-- Nav Item - Utilities Collapse Menu -->
          <li class="nav-item">
            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseUtilities3"
              aria-expanded="true" aria-controls="collapseUtilities3">
              <i class="fas fa-tasks"></i>
              <span>Tasks</span>
            </a>
            <div id="collapseUtilities3" class="collapse" aria-labelledby="headingUtilities"
              data-parent="#accordionSidebar">
              <div class="bg-white py-2 collapse-inner rounded">
                <h6 class="collapse-header">Manage Your Tasks</h6>
                <a class="collapse-item" href="ctask">Create Tasks</a>
                <a class="collapse-item" href="dtask">Delete Tasks</a>
                <a class="collapse-item" href="status">Check Status</a>
                <a class="collapse-item" href="mytasks">My Tasks</a>
              </div>
            </div>
          </li>
          <!-- Nav Item - Utilities Collapse Menu -->
          <li class="nav-item">
            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseUtilities4"
              aria-expanded="true" aria-controls="collapseUtilities4">
              <i class="fas fa-ad"></i>
              <span>Promotion</span>
            </a>
            <div id="collapseUtilities4" class="collapse" aria-labelledby="headingUtilities"
              data-parent="#accordionSidebar">
              <div class="bg-white py-2 collapse-inner rounded">
                <h6 class="collapse-header">Promote Events</h6>
                <a class="collapse-item" href="events">Events</a>
              </div>
            </div>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="logout">
              <i class="fas fa-sign-out-alt"></i>
              <span>Logout</span></a>
          </li>
        </ul>
        <div class="text-center d-none d-md-inline">
          <button class="btn rounded-circle border-0" id="sidebarToggle" type="button"></button>
        </div>
      </div>
    </nav>

    <div class="d-flex flex-column" id="content-wrapper">
      <div id="content">
        <nav class="navbar navbar-light navbar-expand bg-white shadow mb-4 topbar static-top">
          <div class="container-fluid">
            <div class="float-left">
              <h4 class="mt-4">
                Hey, {{user.first_name}}{{' '}}{{user.last_name}}
              </h4>
            </div>
            <ul class="nav navbar-nav flex-nowrap ml-auto">
              <div class="d-none d-sm-block topbar-divider"></div>
              <li class="nav-item dropdown no-arrow">
                <div class="nav-item dropdown no-arrow">
                  <a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false" href="#"><span
                      class="d-none d-lg-inline mr-2 text-gray-600 small">{{user.username}}</span><i
                      class="fas fa-user rounded-circle" style="color: black;"></i></a>
                  <div class="dropdown-menu shadow dropdown-menu-right animated--grow-in">

                    <a class="dropdown-item" href="logout"><i
                        class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>&nbsp;Logout</a>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </nav>
        <div class="container-fluid">
          <!-- Page Heading -->
          <div class="d-sm-flex align-items-center justify-content-between mb-4">
            <h1 class="h3 mb-0 text-gray-800">Dashboard</h1>
          </div>
          <!-- Content Row -->
          <div class="row">

            <!-- Earnings (Monthly) Card Example -->
            <div class="col-xl-3 col-md-6 mb-4">
              <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                  <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                      <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Total Events</div>
                      <div class="h5 mb-0 font-weight-bold text-gray-800">
                        <p class="h5 mb-0 font-weight-bold text-gray-800">{{counts.dtevent}} <small>events</small></p>
                      </div>
                    </div>
                    <div class="col-auto">
                      <i class="fas fa-calendar-check fa-2x text-gray-300""></i>
                      
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Earnings (Monthly) Card Example -->
            <div class=" col-xl-3 col-md-6 mb-4">
                        <div class="card border-left-info shadow h-100 py-2">
                          <div class="card-body">
                            <div class="row no-gutters align-items-center">
                              <div class="col mr-2">
                                <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Tasks Completed
                                </div>
                                <div class="row no-gutters align-items-center">
                                  <div class="col-auto">
                                    <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">
                                      {{counts.ttask}}<small>
                                        tasks
                                      </small></div>
                                  </div>

                                </div>
                              </div>
                              <div class="col-auto">
                                <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
                              </div>
                            </div>
                          </div>
                        </div>
                    </div>
                    <!-- Earnings (Monthly) Card Example -->
                    <div class="col-xl-3 col-md-6 mb-4">
                      <div class="card border-left-success shadow h-100 py-2">
                        <div class="card-body">
                          <div class="row no-gutters align-items-center">
                            <div class="col mr-2">
                              <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Total Teams</div>
                              <div class="h5 mb-0 font-weight-bold text-gray-800">{{counts.tcount}}<small>
                                  teams
                                </small></div>
                            </div>
                            <div class="col-auto">
                              <i class="fas fa-users fa-2x text-gray-300"></i>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Pending Requests Card Example -->
                    <div class="col-xl-3 col-md-6 mb-4">
                      <div class="card border-left-warning shadow h-100 py-2">
                        <div class="card-body">
                          <div class="row no-gutters align-items-center">
                            <div class="col mr-2">
                              <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Total Coordinators
                              </div>
                              <div class="h5 mb-0 font-weight-bold text-gray-800">

                                {{counts.mcount}}<small>
                                  coordinators
                                </small>
                              </div>
                            </div>
                            <div class="col-auto">
                              <i class="fas fa-user fa-2x text-gray-300"></i></i>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="container-fluid">
                  <!-- Content Row -->
                  <div class="row">

                    <!-- Earnings (Monthly) Card Example -->
                    <div class="d-none d-sm-block col-xl-12 col-md-12 mb-4">
                      <div class="card border-left-primary shadow h-100 py-2">
                        <div class="card-body">
                          <div class="row no-gutters align-items-center">
                            <div class="col mr-2">
                              <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Calculator</div>
                              <div class="well">
                                <div id="calculator">
                                  <!-- Screen and clear key -->
                                  <div class="top">
                                    <span class="clear">C</span>
                                    <div class="screen"></div>
                                  </div>

                                  <div class="keys">
                                    <!-- operators and other keys -->
                                    <span>7</span>
                                    <span>8</span>
                                    <span>9</span>
                                    <span class="operator">+</span>
                                    <span>4</span>
                                    <span>5</span>
                                    <span>6</span>
                                    <span class="operator">-</span>
                                    <span>1</span>
                                    <span>2</span>
                                    <span>3</span>
                                    <span class="operator">÷</span>
                                    <span>0</span>
                                    <span>.</span>
                                    <span class="eval">=</span>
                                    <span class="operator">x</span>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <footer class="bg-white sticky-footer">
                <div class="container my-auto">
                  <div class="text-center my-auto copyright">
                    <span>Copyright © EventVIP 2020</span>
                  </div>
                </div>
              </footer>
            </div>
            <a class="border rounded d-inline scroll-to-top" href="#page-top"><i class="fas fa-angle-up"></i></a>
          </div>
          <script src="{% static 'js/jquery.min.js' %}"></script>
          <script src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.js"></script>
          <script src="{% static 'js/theme.js' %}"></script>
          <script>
            // Set the date we're counting down to
            var countDownDate = new Date("Jan 8, 2021 15:37:25").getTime();

            // Update the count down every 1 second
            var x = setInterval(function () {

              // Get today's date and time
              var now = new Date().getTime();

              // Find the distance between now and the count down date
              var distance = countDownDate - now;

              // Time calculations for days, hours, minutes and seconds
              var days = Math.floor(distance / (1000 * 60 * 60 * 24));
              var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
              var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));

              // Display the result in the element with id="demo"
              document.getElementById("demo").innerHTML = days + "d " + hours + "h "
                + minutes + "m ";

              // If the count down is finished, write some text
              if (distance < 0) {
                clearInterval(x);
                document.getElementById("demo").innerHTML = "EXPIRED";
              }
            }, 1000);
          </script>
          <!--Calculator script-->
          <script>
            // Get all the keys from document
            var keys = document.querySelectorAll('#calculator span');
            var operators = ['+', '-', 'x', '÷'];
            var decimalAdded = false;

            // Add onclick event to all the keys and perform operations
            for (var i = 0; i < keys.length; i++) {
              keys[i].onclick = function (e) {
                // Get the input and button values
                var input = document.querySelector('.screen');
                var inputVal = input.innerHTML;
                var btnVal = this.innerHTML;

                // Now, just append the key values (btnValue) to the input string and finally use javascript's eval function to get the result
                // If clear key is pressed, erase everything
                if (btnVal == 'C') {
                  input.innerHTML = '';
                  decimalAdded = false;
                }

                // If eval key is pressed, calculate and display the result
                else if (btnVal == '=') {
                  var equation = inputVal;
                  var lastChar = equation[equation.length - 1];

                  // Replace all instances of x and ÷ with * and / respectively. This can be done easily using regex and the 'g' tag which will replace all instances of the matched character/substring
                  equation = equation.replace(/x/g, '*').replace(/÷/g, '/');

                  // Final thing left to do is checking the last character of the equation. If it's an operator or a decimal, remove it
                  if (operators.indexOf(lastChar) > -1 || lastChar == '.')
                    equation = equation.replace(/.$/, '');

                  if (equation)
                    input.innerHTML = eval(equation);

                  decimalAdded = false;
                }

                // Basic functionality of the calculator is complete. But there are some problems like 
                // 1. No two operators should be added consecutively.
                // 2. The equation shouldn't start from an operator except minus
                // 3. not more than 1 decimal should be there in a number

                // We'll fix these issues using some simple checks

                // indexOf works only in IE9+
                else if (operators.indexOf(btnVal) > -1) {
                  // Operator is clicked
                  // Get the last character from the equation
                  var lastChar = inputVal[inputVal.length - 1];

                  // Only add operator if input is not empty and there is no operator at the last
                  if (inputVal != '' && operators.indexOf(lastChar) == -1)
                    input.innerHTML += btnVal;

                  // Allow minus if the string is empty
                  else if (inputVal == '' && btnVal == '-')
                    input.innerHTML += btnVal;

                  // Replace the last operator (if exists) with the newly pressed operator
                  if (operators.indexOf(lastChar) > -1 && inputVal.length > 1) {
                    // Here, '.' matches any character while $ denotes the end of string, so anything (will be an operator in this case) at the end of string will get replaced by new operator
                    input.innerHTML = inputVal.replace(/.$/, btnVal);
                  }

                  decimalAdded = false;
                }

                // Now only the decimal problem is left. We can solve it easily using a flag 'decimalAdded' which we'll set once the decimal is added and prevent more decimals to be added once it's set. It will be reset when an operator, eval or clear key is pressed.
                else if (btnVal == '.') {
                  if (!decimalAdded) {
                    input.innerHTML += btnVal;
                    decimalAdded = true;
                  }
                }

                // if any other key is pressed, just append it
                else {
                  input.innerHTML += btnVal;
                }

                // prevent page jumps
                e.preventDefault();
              }
            }
          </script>
          <script>
            $("#sortable").sortable();
            $("#sortable").disableSelection();

            countTodos();

            // all done btn
            $("#checkAll").click(function () {
              AllDone();
            });


            $('.add-todo').on('keypress', function (e) {
              e.preventDefault
              if (e.which == 13) {
                if ($(this).val() != '') {
                  var todo = $(this).val();
                  createTodo(todo);
                  countTodos();
                } else {
                  // some validation
                }
              }
            });
            // mark task as done
            $('.todolist').on('change', '#sortable li input[type="checkbox"]', function () {
              if ($(this).prop('checked')) {
                var doneItem = $(this).parent().parent().find('label').text();
                $(this).parent().parent().parent().addClass('remove');
                done(doneItem);
                countTodos();
              }
            });

            //delete done task from "already done"
            $('.todolist').on('click', '.remove-item', function () {
              removeItem(this);
            });

            // count tasks
            function countTodos() {
              var count = $("#sortable li").length;
              $('.count-todos').html(count);
            }

            //create task
            function createTodo(text) {
              var markup = '<li class="ui-state-default"><div class="checkbox"><label><input type="checkbox" value="" />' + text + '</label></div></li>';
              $('#sortable').append(markup);
              $('.add-todo').val('');
            }

            //mark task as done
            function done(doneItem) {
              var done = doneItem;
              var markup = '<li>' + done + '<button class="btn btn-default btn-xs pull-right  remove-item"><span class="glyphicon glyphicon-remove"></span></button></li>';
              $('#done-items').append(markup);
              $('.remove').remove();
            }

            //mark all tasks as done
            function AllDone() {
              var myArray = [];

              $('#sortable li').each(function () {
                myArray.push($(this).text());
              });

              // add to done
              for (i = 0; i < myArray.length; i++) {
                $('#done-items').append('<li>' + myArray[i] + '<button class="btn btn-default btn-xs pull-right  remove-item"><span class="glyphicon glyphicon-remove"></span></button></li>');
              }

              // myArray
              $('#sortable li').remove();
              countTodos();
            }

            //remove done task from list
            function removeItem(element) {
              $(element).parent().remove();
            }
          </script>
</body>
<style>
  /*Todo Style*/
  .todolist {
    background-color: #FFF;
    padding: 20px 20px 10px 20px;
    margin-top: 30px;
  }

  .todolist h1 {
    margin: 0;
    padding-bottom: 20px;
    text-align: center;
  }

  .form-control {
    border-radius: 0;
  }

  li.ui-state-default {
    background: #fff;
    border: none;
    border-bottom: 1px solid #ddd;
  }

  li.ui-state-default:last-child {
    border-bottom: none;
  }

  .todo-footer {
    background-color: #F4FCE8;
    margin: 0 -20px -10px -20px;
    padding: 10px 20px;
  }

  #calculator {
    width: 325px;
    height: auto;

    margin: 50px auto;
    padding: 20px 20px 9px;

    background: #9dd2ea;
    background: linear-gradient(#9dd2ea, #8bceec);
    border-radius: 3px;
    box-shadow: 0px 4px #009de4, 0px 10px 15px rgba(0, 0, 0, 0.2);
  }

  /* Top portion */
  .top span.clear {
    float: left;
  }

  /* Inset shadow on the screen to create indent */
  .top .screen {
    height: 40px;
    width: 212px;

    float: right;

    padding: 0 10px;

    background: rgba(0, 0, 0, 0.2);
    border-radius: 3px;
    box-shadow: inset 0px 4px rgba(0, 0, 0, 0.2);

    /* Typography */
    font-size: 17px;
    line-height: 40px;
    color: white;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
    text-align: right;
    letter-spacing: 1px;
  }

  /* Clear floats */
  .keys,
  .top {
    overflow: hidden;
  }

  /* Applying same to the keys */
  .keys span,
  .top span.clear {
    float: left;
    position: relative;
    top: 0;

    cursor: pointer;

    width: 66px;
    height: 36px;

    background: white;
    border-radius: 3px;
    box-shadow: 0px 4px rgba(0, 0, 0, 0.2);

    margin: 0 7px 11px 0;

    color: #888;
    line-height: 36px;
    text-align: center;

    /* prevent selection of text inside keys */
    user-select: none;

    /* Smoothing out hover and active states using css3 transitions */
    transition: all 0.2s ease;
  }

  /* Remove right margins from operator keys */
  /* style different type of keys (operators/evaluate/clear) differently */
  .keys span.operator {
    background: #FFF0F5;
    margin-right: 0;
  }

  .keys span.eval {
    background: #f1ff92;
    box-shadow: 0px 4px #9da853;
    color: #888e5f;
  }

  .top span.clear {
    background: #ff9fa8;
    box-shadow: 0px 4px #ff7c87;
    color: white;
  }

  /* Some hover effects */
  .keys span:hover {
    background: #9c89f6;
    box-shadow: 0px 4px #6b54d3;
    color: white;
  }

  .keys span.eval:hover {
    background: #abb850;
    box-shadow: 0px 4px #717a33;
    color: #ffffff;
  }

  .top span.clear:hover {
    background: #f68991;
    box-shadow: 0px 4px #d3545d;
    color: white;
  }

  /* Simulating "pressed" effect on active state of the keys by removing the box-shadow and moving the keys down a bit */
  .keys span:active {
    box-shadow: 0px 0px #6b54d3;
    top: 4px;
  }

  .keys span.eval:active {
    box-shadow: 0px 0px #717a33;
    top: 4px;
  }

  .top span.clear:active {
    top: 4px;
    box-shadow: 0px 0px #d3545d;
  }
</style>

</html>